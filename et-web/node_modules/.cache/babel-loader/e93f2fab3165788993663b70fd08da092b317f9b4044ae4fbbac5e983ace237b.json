{"ast":null,"code":"import { Client } from '@stomp/stompjs';\nlet stompClient = null;\nexport function connect(onMessageReceived, onConnected) {\n  const socket = new SockJS(\"/ws\");\n  stompClient = Stomp.over(socket);\n  stompClient.connect({}, onConnected, onError);\n  function onError(error) {\n    console.log(\"WebSocket connection error: \" + error);\n  }\n}\nexport function sendMessage(message) {\n  if (stompClient) {\n    stompClient.send(\"/app/chat.sendMessage\", {}, JSON.stringify(message));\n  }\n}\nexport function addUser(username) {\n  if (stompClient) {\n    stompClient.send(\"/app/chat.addUser\", {}, JSON.stringify({\n      sender: username,\n      type: 'JOIN'\n    }));\n  }\n}\nexport function subscribePublic(onMessageReceived) {\n  if (stompClient) {\n    stompClient.subscribe(\"/topic/public\", function (message) {\n      onMessageReceived(JSON.parse(message.body));\n    });\n  }\n}","map":{"version":3,"names":["Client","stompClient","connect","onMessageReceived","onConnected","socket","SockJS","Stomp","over","onError","error","console","log","sendMessage","message","send","JSON","stringify","addUser","username","sender","type","subscribePublic","subscribe","parse","body"],"sources":["D:/000Projects/JAVA/emp-train/et-web/src/services/WebSocketService.js"],"sourcesContent":["import { Client } from '@stomp/stompjs';\r\n\r\n\r\nlet stompClient = null;\r\n\r\nexport function connect(onMessageReceived, onConnected) {\r\n  const socket = new SockJS(\"/ws\");\r\n  stompClient = Stomp.over(socket);\r\n  stompClient.connect({}, onConnected, onError);\r\n\r\n  function onError(error) {\r\n    console.log(\"WebSocket connection error: \" + error);\r\n  }\r\n}\r\n\r\nexport function sendMessage(message) {\r\n  if (stompClient) {\r\n    stompClient.send(\"/app/chat.sendMessage\", {}, JSON.stringify(message));\r\n  }\r\n}\r\n\r\nexport function addUser(username) {\r\n  if (stompClient) {\r\n    stompClient.send(\"/app/chat.addUser\", {}, JSON.stringify({ sender: username, type: 'JOIN' }));\r\n  }\r\n}\r\n\r\nexport function subscribePublic(onMessageReceived) {\r\n  if (stompClient) {\r\n    stompClient.subscribe(\"/topic/public\", function (message) {\r\n      onMessageReceived(JSON.parse(message.body));\r\n    });\r\n  }\r\n}\r\n"],"mappings":"AAAA,SAASA,MAAM,QAAQ,gBAAgB;AAGvC,IAAIC,WAAW,GAAG,IAAI;AAEtB,OAAO,SAASC,OAAOA,CAACC,iBAAiB,EAAEC,WAAW,EAAE;EACtD,MAAMC,MAAM,GAAG,IAAIC,MAAM,CAAC,KAAK,CAAC;EAChCL,WAAW,GAAGM,KAAK,CAACC,IAAI,CAACH,MAAM,CAAC;EAChCJ,WAAW,CAACC,OAAO,CAAC,CAAC,CAAC,EAAEE,WAAW,EAAEK,OAAO,CAAC;EAE7C,SAASA,OAAOA,CAACC,KAAK,EAAE;IACtBC,OAAO,CAACC,GAAG,CAAC,8BAA8B,GAAGF,KAAK,CAAC;EACrD;AACF;AAEA,OAAO,SAASG,WAAWA,CAACC,OAAO,EAAE;EACnC,IAAIb,WAAW,EAAE;IACfA,WAAW,CAACc,IAAI,CAAC,uBAAuB,EAAE,CAAC,CAAC,EAAEC,IAAI,CAACC,SAAS,CAACH,OAAO,CAAC,CAAC;EACxE;AACF;AAEA,OAAO,SAASI,OAAOA,CAACC,QAAQ,EAAE;EAChC,IAAIlB,WAAW,EAAE;IACfA,WAAW,CAACc,IAAI,CAAC,mBAAmB,EAAE,CAAC,CAAC,EAAEC,IAAI,CAACC,SAAS,CAAC;MAAEG,MAAM,EAAED,QAAQ;MAAEE,IAAI,EAAE;IAAO,CAAC,CAAC,CAAC;EAC/F;AACF;AAEA,OAAO,SAASC,eAAeA,CAACnB,iBAAiB,EAAE;EACjD,IAAIF,WAAW,EAAE;IACfA,WAAW,CAACsB,SAAS,CAAC,eAAe,EAAE,UAAUT,OAAO,EAAE;MACxDX,iBAAiB,CAACa,IAAI,CAACQ,KAAK,CAACV,OAAO,CAACW,IAAI,CAAC,CAAC;IAC7C,CAAC,CAAC;EACJ;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}